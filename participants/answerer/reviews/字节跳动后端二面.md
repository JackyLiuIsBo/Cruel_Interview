# 字节跳动后端二面

> 作者：我201809281957529  
> 链接：[字节后端一二三面面经_笔经面经_牛客网](https://www.nowcoder.com/discuss/914652)  
> 来源：牛客网  

**总结：大多都是常规面试题**

### TCP握手挥手

**TCP三次握手的过程：**

1. Client将标志位SYN置为1，随机产生一个值seq=J，并将该数据包发送给Server，等待Server确认。
2. Server收到数据包后由标志位SYN=1知道Client请求建立连接，Server将标志位SYN和ACK都置1，ack=J+1，随机产生一个值seq=K，并将该数据包发给Client以确认连接请求。
3. Client收到确认后，检测ack是否为J+1，ACK是否为1，如果正确则将标志位ACK置为1，ack=K+1，并将该数据包发送给Server。完成三次握手，随后Client与Server之间可以开始传输数据了。

**TCP四次挥手的过程：**

1. 数据传输结束后，Client的应用进程发出连接释放报文段FIN，并停止发送数据，此时Client依然可以接收Server发送来的数据。
2. Server接收到FIN后，发送一个ACK给Client，确认序号为收到的序号+1。
3. 当Server没有数据要发送时，Server发送一个FIN报文，等待Client的确认。
4. Client收到Server的FIN报文后，给Server发送一个ACK报文，确认序列号为收到的序号+1。此时Client进入TIME_WAIT状态，等待2MSL（MSL：报文段最大生存时间），然后关闭连接。

### 滑动窗口（连续ARQ、停止等待ARQ。还问有没有别的ARQ，忘了）

   

### 拥塞控制（四个[算法](/jump/super-jump/word?word=%E7%AE%97%E6%B3%95)、具体实现）


（1）**慢启动**：定义拥塞窗口，一开始将该窗口大小设为1，之后每次收到一次确认应答（**一次成功来回传输**），将拥塞窗口大小 乘以2  
（2）**拥塞避免**：设置慢启动阈值，一般开始都设为65536。拥塞避免是只当拥塞窗口大小达到这个阈值，拥塞窗口的值不再指数上升，而是+1  
（3）**快恢复**：将报文段的超时重传看做拥塞，则一旦发生超时重传，我们就将阈值设为当前窗口大小的一半，并且窗口大小变为1，重新进入慢启动过程  
（4）**快速重传**：3次重复确认应答，立即重传。



### 发送窗口 接收窗口 拥塞窗口

   发送窗口是min(接收窗口，拥塞窗口)。



### 场景设计题（两个巨大的文本（大小远超内存）比较，设计比较方法、磁盘IO）

暂时不懂

### HTTP与HTTPS

1. http是是明文传输，https则是具有安全性的tsl加密传输协议。
2. https除了三次握手以外，还要进行ssl握手，协商加密使用对称密钥
3. https需要服务端申请证书，浏览器端安装根证书
4. 端口也不一样，前者是80，后者是443###   

### 判断CA证书规范

暂时不懂

### cookie和session

由于HTTP是一种无状态协议,服务器没有办法单单从网络连接上面知道访问者的身份,为了解决这个问题,就诞生了Cookie

Cookie实际上是一小段的文本信息。客户端请求服务器，如果服务器需要记录该用户状态，就使用response向客户端浏览器颁发一个Cookie

客户端浏览器会把Cookie保存起来。当浏览器再请求该网站时，浏览器把请求的网址连同该Cookie一同提交给服务器。服务器检查该Cookie，以此来辨认用户状态。服务器还可以根据需要修改Cookie的内容。

实际就是颁发一个通行证，每人一个，无论谁访问都必须携带自己通行证。这样服务器就能从通行证上确认客户身份了。这就是Cookie的工作原理

cookie 可以让服务端程序跟踪每个客户端的访问，但是每次客户端的访问都必须传回这些Cookie，如果 Cookie 很多，这无形地增加了客户端与服务端的数据传输量，

而 Session 的出现正是为了解决这个问题。同一个客户端每次和服务端交互时，不需要每次都传回所有的 Cookie 值，而是只要传回一个 ID，这个 ID 是客户端第一次访问服务器的时候生成的， 而且每个客户端是唯一的。这样每个客户端就有了一个唯一的 ID，客户端只要传回这个 ID 就行了，这个 ID 通常是 NANE 为JSESIONID 的一个 Cookie。  
**区别**：

1、数据存放位置不同：cookie数据存放在客户的浏览器上，session数据放在服务器上。

2、安全程度不同：cookie不是很安全，别人可以分析存放在本地的COOKIE并进行COOKIE欺骗,考虑到安全应当使用session。

3、性能使用程度不同：session会在一定时间内保存在服务器上。当访问增多，会比较占用你服务器的性能,考虑到减轻服务器性能方面，应当使用cookie。

4、数据存储大小不同：单个cookie保存的数据不能超过4K，很多浏览器都限制一个站点最多保存20个cookie，而session则存储与服务端，浏览器对其没有限制。  
5、会话机制不同  
session会话机制：session会话机制是一种服务器端机制，它使用类似于哈希表（可能还有哈希表）的结构来保存信息。

cookies会话机制：cookie是服务器存储在本地计算机上的小块文本，并随每个请求发送到同一服务器。 Web服务器使用HTTP标头将cookie发送到客户端。在客户端终端，浏览器解析cookie并将其保存为本地文件，该文件自动将来自同一服务器的任何请求绑定到这些cookie。

### 索引、联合索引、最左原则

所谓最左原则指的就是如果你的 SQL 语句中用到了联合索引中的最左边的索引，那么这条 SQL 语句就可以利用这个联合索引去进行匹配，值得注意的是，当遇到范围查询(>、<、between、like)就会停止匹配。


[算法](/jump/super-jump/word?word=%E7%AE%97%E6%B3%95) [331. 验证二叉树的前序序列化](https://leetcode-cn.com/problems/verify-preorder-serialization-of-a-binary-tree/)

利用二叉树叶子节点个数与非叶子节点个数关系

```cpp
class Solution {
public:
    bool isValidSerialization(string preorder) {
        int leaves = 0,  nodes = 1;
        for(char c: preorder){
            if(2 * leaves > nodes) return false;
            if(c == ',') ++nodes;
            if(c == '#') ++leaves;
        }
        return 2 * leaves == nodes + 1; 
    }
};
```
