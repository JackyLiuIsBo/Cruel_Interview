作者：derrors
链接：https://www.nowcoder.com/discuss/774264?source_id=discuss_experience_nctrack&channel=-1
来源：牛客网

手撕代码

LeetCode 比较版本号

```c++
class Solution {
public:
    /**
     * 代码中的类名、方法名、参数名已经指定，请勿修改，直接返回方法规定的值即可
     *
     * 比较版本号
     * @param version1 string字符串 
     * @param version2 string字符串 
     * @return int整型
     */
    int compare(string version1, string version2) {
        // write code here
        int i1, i2, j1, j2;
        long long d1 = 0, d2 = 0;
        for(i1 = 0, i2 = 0; i1 < version1.size() || i2 < version2.size(); ){
            j1 = i1 + 1, j2 = i2 + 1;
            d1 = 0, d2 = 0;
            while(j1 < version1.size() && version1[j1] != '.') j1++;
            while(j2 < version2.size() && version2[j2] != '.') j2++;
            while(i1 < j1 && j1 <= version1.size()) d1 = d1 * 10 + version1[i1++] - '0';
            while(i2 < j2 && j2 <= version2.size()) d2 = d2 * 10 + version2[i2++] - '0';
            if(d1 != d2){
                if(d1 > d2) return 1;
                else return -1;
            }
            i1 = j1 + 1, i2 = j2 + 1;
        }
        return 0;
    }    
};

```
C++ 基础

一个 C++ 程序从代码实现到运行要经过哪些阶段？每个阶段有什么作用？

这里面试官主要是想问编译的那部分知识，所以就详细回答了预处理-编译-汇编-链接四个过程的原理。

- A:经过预处理->编译->汇编->链接四个过程，

为了使程序编译运行后效率高一些，在编程时需要注意哪些问题？

- A: 做好内存管理，提高内存的紧凑性；避免过多的内存引用；减少函数调用；提高并行化等。


C++ 中的 new/delete 函数与 malloc/free 的区别？

主要是前者会调用相关对象的构造、析构函数，后者不会，前者不需要指定申请/释放的内存的大小，后者需要指定等。

面试官追问：使用 new 申请内存失败会怎么样？

- A: 会抛出异常

问：如果我想使得申请失败后返回一个空指针，需要怎么做？

- A：使用nothrow new来实现

虚函数的原理和实现？

- A: 编译器会为每个存在虚函数的类指定一个指向虚函数表的虚函数指针，虚函数表是一个记录虚函数地址的指针数组，每个派生类会继承父类的虚函数表同时增加自己的
虚函数入口地址，。关于多态，实际上就是用基类指针指向子类的实例，通过基类指针调用子类实例的成员函数。


构造函数能否声明为虚函数或者纯虚函数，析构函数呢？

析构函数可以为虚函数，并且一般情况下基类析构函数要定义为虚函数，只有在基类析构函数定义为虚函数时，调用操作符 delete 销毁指向对象的基类指针时，才能准确调用派生类的析构函数（从该级向上按序调用虚函数），才能准确销毁数据。

构造函数不能定义为虚函数。在构造函数中可以调用虚函数，不过此时调用的是正在构造的类中的虚函数，而不是子类的虚函数，
- A: 虚函数需要依赖对象中指向类的虚函数表的指针来实现，而这个指针是通过构造函数完成初始化的，也就是说，这是个先有鸡还是先有蛋的问题。

为什么父类的析构函数必须是虚函数？


- A:若析构函数不被声明成虚函数，那么编译器将实施静态绑定，在删除基类指针时，只会调用基类的析构函数而不会调用派生类的析构函数，会造成派生类对象析构不完全，从而导致内存泄漏。

计算机网络

GET 和 POST 的区别？

- A: 主要是语义不同，`GET`是得到数据，发送的请求，返回的是数据，`POST`是发送数据，返回的是结果。

TCP 拥塞控制原理？

- A: 通过几个算法，慢启动，拥塞避免，快速恢复

Cookie 和 Session 的原理分别是什么？

TCP 粘包和拆包分别是什么？

粘包：在进行数据传输时，发送端一次性连续发送多个数据包，TCP 协议将多个数据包打包成一个 TCP 报文发送出去；

拆包：当发送端发送的数据包长度超过一次 TCP 报文所能传输的最大值时，就会将该数据包拆分成多个 TCP 报文分开传输。

问：如何解决粘包和拆包问题？

-A：（1）设置消息定长（2）头部添加消息长度（3）消息尾部添加特殊字符进行分割（4）将消息分为消息头和消息尾。

操作系统

内存管理自由链表和内存池讲一下

这个问题回答的不太好，记得在学习 STL 内存配置器时候学过，不过太久没看了忘了好多。

虚拟内存原理？

- A:通过硬件和软件的配合，使得应用程序认为自己实际上使用的多个不连续的内存段是连续的一段空间。它有两个优点：1.虚拟内存空间是连续的，没有碎片。 2.
虚拟内存的最大空间是CPU的最大寻址空间，不受内存空间大小的限制。

逻辑地址怎么转换成物理地址？
- A：逻辑地址=段地址：偏移地址，然后转换为物理地址的话是物理地址 = 段地址 << 4 + 偏移地址