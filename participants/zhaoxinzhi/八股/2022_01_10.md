## 一、写在前面

今天顺着昨天的内容，继续看了**数据库**，特别是MySQL相关知识点，尽管有的知识感觉还消化不掉，先留坑以后再填。。



## 二、数据库

### 1、什么是自动提交？

MySQL默认采用自动提交`AUTOCOMMIT`模式。也就是说，如果不是显式地开始一个事务，则每个查询都被当作一个事务执行提交操作。

对于MyISAM或者内存表这些事务型的表，修改`AUTOCOMMIT`不会有任何影响。对这类表来说，没有`COMMIT`或者`ROLLBACK`的概念，也可以说是相当于一直处于`AUTOCOMMIT`启用的模式。

如果在事务中混合使用了事务型和非事务型的表（例如InnoDB和MyISAM表）,在正常提交的情况下不会有什么问题。

但如果该事务需要回滚，非事务型的表上的变更就无法撤销，这会导致数据库处于不一致的状态，这种情况很难修复，事务的最终结果将无法确定。所以，为每张表选择合适的存储引擎非常重要。

### 2、MySQL中哪些存储引擎支持事务？

MySQL中InnoDB和NDB Cluster存储引擎提供了事务处理能力，以及其他支持事务的第三引擎。

### 3、MySQL存储引擎类型有哪些？

最常用的存储引擎是InnoDB引擎和MyISAM存储引擎。InnoDB是MySQL的默认事务引擎。

### 4、InnoDB存储引擎的特点和应用场景？

InnoDB是MySQL的默认「事务引擎」，被设置用来处理大量短期（short-lived）事务，短期事务大部分情况是正常提交的，很少会回滚。

### 5、InnoDB的特点

采用多版本并发控制（MVCC，Multi Version Concurrency Control）来支持高并发。并且实现了四个标准的隔离级别，通过间隙锁`next-key locking`策略防止幻读的出现。

引擎的表基于聚簇索引建立，聚簇索引对主键查询有很高的性能。不过它的二级索引`secondary index`非主键索引中必须包含主键列，所以如果主键列很大的话，其他的所有索引都会很大。因此，若表上的索引较多的话，主键应当尽可能的小。另外InnoDB的存储格式是平台独立。

InnoDB做了很多优化，比如：磁盘读取数据方式采用的可预测性预读、自动在内存中创建hash索引以加速读操作的自适应哈希索引（adaptive hash index)，以及能够加速插入操作的插入缓冲区（insert buffer)等。

InnoDB通过一些机制和工具支持真正的热备份，MySQL的其他存储引擎不支持热备份，要获取一致性视图需要停止对所有表的写入，而在读写混合场景中，停止写入可能也意味着停止读取。

### 6、InnoDB与MyISAM对比

待填坑。。

### 7、MySQL共享锁、排他锁、悲观锁、乐观锁

待填坑。。
