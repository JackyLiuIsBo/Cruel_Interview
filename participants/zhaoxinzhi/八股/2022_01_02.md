## 一、写在前面

今天主要想复习一下**计算机网络应用层**的知识。

正好前两天看了网络代理的实现过程，近两周准备用go语言实现一个精简版的http代理服务器。

## 二、计算机网络

### 1、HTTP和HTTPS区别

1. 端口不同：HTTP使用的是80端口，HTTPS使用443端口；
2. HTTP（超文本传输协议）信息是明文传输，HTTPS运行在SSL(Secure Socket Layer)之上，添加了加密和认证机制，更加安全；
3. HTTPS由于加密解密会带来更大的CPU和内存开销；
4. HTTPS通信需要证书，一般需要向证书颁发机构（CA）购买

### 2、GET和POST的区别

> 六点区别

1. GET是幂等的，即读取同一个资源，总是得到相同的数据，POST不是幂等的；
2. GET一般用于从服务器获取资源，而POST有可能改变服务器上的资源；
3. 请求形式上：GET请求的数据附在URL之后，在HTTP请求头中；POST请求的数据在请求体中；
4. 安全性：GET请求可被缓存、收藏、保留到历史记录，且其请求数据明文出现在URL中。POST的参数不会被保存，安全性相对较高；
5. GET只允许ASCII字符，POST对数据类型没有要求，也允许二进制数据；
6. GET的长度有限制（操作系统或者浏览器），而POST数据大小无限制（比如可以下载几个G的文件）

### 3、Session和Cookie的区别

> 1、存放位置。2、存储大小。3、是否安全。

Session是服务器端保持状态的方案，Cookie是客户端保持状态的方案

Cookie保存在客户端本地，客户端请求服务器时会将Cookie一起提交；Session保存在服务端，通过检索Sessionid查看状态。保存Sessionid的方式可以采用Cookie，**如果禁用了Cookie，可以使用URL重写机制（把会话ID保存在URL中）。**

Cookie的作用：用来保存用户信息。

①保存网页部分数据。我们在Cookie中保存已经登录过的用户信息，下次访问网站的时候页面就自动帮你把一些基本信息填了。（比如问卷就是这么实现：刷新网页后已填内容不丢失的？）

②网站的保持登录。一般登录一次后，下次访问网站的时候就不需要重新登录了，这是因为用户登录的时候我们在Cookie中存放了一个Token（这个Token是第一次登录的时候从服务端获得的，然后后面每次登录，服务端会先去看cookie中有没有Token，有的话就不需要验证了。）

③统计访问的用户数。虽然可以用IP来统计有多少用户访问过，但是对于局域网用户就GG了（比如网吧里所有人对外共用一个IP，就算10个人访问过，计数器也只+1）。所以最好的做法是，可以每台访问的计算机创建一个cookie，然后统计cookie就好了。

如果要在cookie中存储一些敏感信息，不要直接写入cookie，最好能将cookie的信息加密然后使用到的时候再去服务端解密。（其实Token就是个类似加密的过程，服务端的Token映射到User可以抽象为解密的过程。）

> 用python写个伪代码，统计一周内有多少人访问了网页：
>
> ```python
> if response.cookie("cookiename")=="":
> 	response.cookie("cookiename")="user"
> 	response.cookie("cookiename").expires=date()+7 # 设置cookie的生命周期。默认生命周期起始于它被写放游览器端的那一刻，结束于游览器结束执行时。
> 	计数器加1
> ```
>
> **提问：如何判断一个COOKIE有没有过期？**

> 这是一个不能用cookie的问题：
>
> 我在A服务器有程序a，在B服务器运行了系统b，用户在a中登录了，然后在a中进入了b系统。提问：如何保证在进入b系统的时候，不需要重新验证登录？
>
> 因为cookie只能用于同一ip，所以cookie这种方法是不行了。解决方式是在进入b系统的url中，可以把用户名和密码放在url里，或者用户名和Token放在url里，去发出请求。
>
> ![IpVsCookie](http://inews.gtimg.com/newsapp_ls/0/14389448947/0)

