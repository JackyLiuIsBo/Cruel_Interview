## 一、写在前面

又是肝**计算机网络应用层和网络层**的一天。



## 二、计算机网络

### 1、什么是RIP？算法是什么？

RIP (Routing Information Protocol）是距离矢量路由协议。

RIP是一个运行在UDP上的应用层协议。

每个路由器维护一张表，记录该路由器到其它网络的”跳数“，路由器到与其直接连接的网络的跳数是1，每多经过一个路由器跳数就加1；更新该表时和相邻路由器交换路由信息；路由器允许一个路径最多包含15个路由器，如果跳数为16，则不可达。交付数据报时优先选取距离最短的路径。

- 优点
  - 实现简单，开销小
- 缺点
  - **主要：当网络出现故障时，要经过较长的时间才能将此信息传递到所有路由器**
  - 随着网络规模扩大开销也会增大；
  - 最大距离为15，限制了网络的规模；

### 2、梳理应用层常见的协议和对应端口

- FTP(21端口)：文件传输协议
- SSH(22端口)：远程登陆
- TELNET(23端口)：远程登录
- SMTP(25端口)：发送邮件
- POP3(110端口)：接收邮件
- HTTP(80端口)：超文本传输协议
- HTTPS(443端口)： 超文本传输安全协议（通过**传输加密和身份认证**保证了传输过程的安全性）
- DNS(53端口)：运行在UDP上，域名解析服务

### 3、路由器、交换机位于哪一层？

- 路由器网络层，根据IP地址进行寻址；
- 交换机数据链路层，根据MAC地址进行寻址

### 4、划分子网是什么？路由器如何转发分组？

一个IP地址包括两部分，net-id和host-id。

划分子网：从主机号host-id借用若干个比特作为子网号subnet-id；

子网掩码：网络号和子网号都为1，主机号为0。



路由器如何转发分组：路由器仅根据网络号net-id来转发分组（**不包括子网号！！**），当分组到达目的网络的路由器之后，再按照主机号host-id将分组交付给主机；同一网络上的所有主机的网络号相同。

如果网络中有子网划分，数据报仍然先按照网络号找到目的网络，发送到路由器，路由器再按照网络号和子网号找到目的子网：将子网掩码与目标地址逐比特与操作，若结果为某个子网的网络地址，则送到该子网。

### 5、什么是ARP协议 (Address Resolution Protocol)？

**ARP协议完成了IP地址与物理地址的映射**。ARP协议是局域网组建的关键，就其原理来说**只适用于局域网**。

每一个主机都设有一个 ARP 高速缓存，里面有**所在的局域网**上的各主机和路由器的 IP 地址到硬件地址的映射表。当源主机要发送数据包到目的主机时，会先检查自己的ARP高速缓存中有没有目的主机的MAC地址。如果有，就直接将数据包发到这个MAC地址，如果没有，就向**所在的局域网**发起一个ARP请求的**广播**包（在发送自己的 ARP 请求时，同时会带上自己的 IP 地址到硬件地址的映射），收到请求的主机检查自己的IP地址和目的主机的IP地址是否一致，如果一致，则先保存源主机的映射到自己的ARP缓存，然后给源主机发送一个ARP响应数据包。源主机收到响应数据包之后，先添加目的主机的IP地址与MAC地址的映射，再进行数据传送。如果源主机一直没有收到响应，表示ARP查询失败。

如果所要找的主机和源主机不在同一个局域网上，那么就要通过 ARP 找到一个位于本局域网上的某个路由器的硬件地址，然后把分组发送给这个路由器，让这个路由器把分组转发给下一个网络。剩下的工作就由下一个网络来做。

### 6、什么是NAT协议？

NAT协议 (Network Address Translation, 网络地址转换)，是用于解决内网中的主机要和因特网上的主机通信。

由**NAT路由器将主机的本地IP地址转换为全球IP地址**，分为静态转换（转换得到的全球IP地址固定不变）和动态NAT转换。

