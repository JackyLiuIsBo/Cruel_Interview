## 一、写在前面

这是字节后端实习的Python面经。（实习）

> 链接：https://www.nowcoder.com/discuss/359048
>
> 我是被捞起来面的，一面1个小时，休息了5分钟之后直接二面，也是1个小时。第二天三面，应该是leader面，就面了半小时左右。过了两天之后进入HR面。



## 二、Go

### 1、计算机网络

- 三次握手 

- （我的拓展）可以两次握手吗？

  - 不可以。两个原因。
  - 可能会出现已失效的连接请求报文段又传到了服务器端
  - 无法保证第二次握手被正确接收，也无法保证Client和Server之间成功互换初始序列号。

- 握手时产生的序列号干什么用的

  - 用来标识每一个包
  - seq是保证重传、窗口大小调整等的前提

- （我的拓展）如果没有这个序列号会发生什么？

  > 参考链接：https://www.zhihu.com/question/21033999

  - 没有序列号机制的话，就没法区分一个连接中的不同的包了
  - 会出现包丢失和包重复的现象，而服务端无法察觉。
  - 如果不携带序列号，就可以很轻易的伪造TCP链接（刷票啥的不怕被封ip了）

- 讲一下接收窗口

  - 防止发送方发送速率太快，接收方缓存区不够导致溢出。接收方会维护一个接收窗口 receiver window（窗口大小单位是字节），接受窗口的大小是根据自己的资源情况动态调整的，在返回ACK时将接受窗口大小放在TCP报文中的窗口字段告知发送方。发送窗口的大小不能超过接受窗口的大小，只有当发送方发送并收到确认之后，才能将发送窗口右移。

- （我的拓展）什么是零窗口？

  - 如果接收方没有能力接收数据，就会将接收窗口设置为0，这时发送方必须暂停发送数据，但是会启动一个持续计时器(persistence timer)，到期后发送一个大小为1字节的探测数据包，以查看接收窗口状态。如果接收方能够接收数据，就会在返回的报文中更新接收窗口大小，恢复数据传送。

- TCP和UDP的本质区别

  - 是否面向连接
  - 是否提供可靠传输
  - 面向字节流Vs面向报文

- 什么时候选择TCP/UDP

  - 对某些实时性要求比较高的情况，选择UDP，比如游戏，媒体通信，实时视频流（直播），即使出现传输错误也可以容忍；其它大部分情况下，HTTP都是用TCP，因为要求传输的内容可靠，不出现丢失

- HTTPS的连接过程

  - 要求：服务器安装了CA认证的SSL证书。（即服务器把自己的公开密钥登录至数字证书认证机构。）

  - > 流程如下：（下面客户端往往指的是浏览器）
    >
    > 1. 客户端发送Client Hello包给服务端，发送自己支持的TLS版本和加密套件。同时生成第1随机数给服务端。
    >
    > 2. 服务端确认支持的TLS版本以及选择的加密套件。同时生成第2随机数给客户端。
    >
    > 3. 服务端继续发送，把证书和公钥发送给客户端。
    >
    > 4. 服务端发送Server Hello Done
    >
    > 5. 客户端一并处理这些响应：验证证书（浏览器根据对照自己的证书信任列表来确认这个服务器是否可信），生成预主密钥。并用公钥加密后发给服务端。
    >
    > 6. C/S双方都用预主密钥，第1、2随机数计算出会话密钥
    >
    >    （-------此时双方通过非对称加密获得了会话密钥---------）
    >
    > 7. --------------------------
    >
    >    后面的会话大家都只是用会话密钥进行对称加密即可。
    >
    > 注意第3步，这里公钥是包含在证书里的，也是要加密的，客户端通过内置证书链解密公钥以确定公钥是可信的

- 7层模型和4层模型，每一层有哪些常见协议？ 

  - > 参考链接：https://www.cnblogs.com/wxd0108/p/7597216.html
    >
    > 注意ICMP工作在网络层。

  - 应用层、表示层、会话层、传输层、网络层、数据链路层、物理层

  - 应用层、运输层、网际层和网络接口层

- 路由器/交换机是哪一层 

  - 交换机工作在数据链路层，路由器工作在网络层。
  - 传统的交换机只能分割冲突域，不能分割广播域；路由器可以分割广播域。由交换机连接的网段仍属于同一个广播域，广播数据包会在交换机连接的所有网段上传播，在某些情况下会导致通信拥挤和安全漏洞。连接到路由器上的网段会被分配成不同的广播域，广播数据不会穿过路由器。
  - 路由器提供了防火墙的服务，从而防止广播风暴。交换机可能形成广播风暴，因为广播风暴出现在局域网上。
    - 防止广播风暴的主要思路在“防止出现环路”上。
    - 广泛应用的协议是STP（Spanning Tree Protocol），生成树协议。即要往这个网络中添加一个端口（或者连接另一个网络）前，先确定一下拓扑结构，只有确认好了拓扑结构中没有环路，才正式开启向这个端口或网络发送数据。

- 网络层用来干嘛？传输层用来干嘛？ 数据链路层用来干嘛？

  - 一句话：网络层最主要的作用是路由，传输层最主要的作用是传送控制。

  - 网络层目的是实现两个主机(端系统)之间的数据透明传送(连接和路径选择)。

  - 传输层主要负责向两个主机中进程之间的通信提供服务。

  - > 传输层：由于一个主机同时运行多个进程，因此运输层具有复用和分用功能。传输层在终端用户之间提供透明的数据传输，向上层提供可靠的数据传输服务。传输层在给定的链路上通过流量控制、分段/重组和差错控制来保证数据传输的可靠性。传输层的一些协议是面向链接的，这就意味着传输层能保持对分段的跟踪，并且重传那些失败的分段。
    >
    > 
    >
    > 判断题：
    >
    > 传输层的功能是保证数据可靠地从发送结点发送到目标结点（×）
    >
    > 因为TCP才可靠。

  - 数据链路层实现可靠传输（**可靠传输：不重复不丢失不失序**）

    - 主要功能：封装成帧，透明传输(五个连续1插入0)，差错控制(CRC)。

- HTTP可以使用UDP吗 

  - HTTP不可以使用UDP，主要是HTTP需要基于可靠的传输协议，而UDP不可靠。但是HTTP3.0是使用udp实现的。

- HTTPS怎么确认收到的包就是服务器发来的 

  - https对端口和ip不加密，建立通信之后，后续的包就知道是服务器发来的了。

- 确定发送窗口的大小，如何最大利用带宽，假设延迟100ms，发送端10Mb/s，接收端100Mb/s

  - 首先，通信的瓶颈在于1.带宽 2.发送窗口。这里的意思是带宽不构成阻碍
  - 答案是1Mb，因为发送端在收到第一个ack前，发送了0.1乘10Mb数据。发送窗口必须大于等于这个值，不然发送窗口会导致带宽不能被充分利用

- 输入 `www.baidu.com`，怎么变成`https://www.baidu.com` 的，怎么确定用HTTP还是HTTPS？

  - 一种是原始的302跳转，服务器把所有的HTTP流量跳转到HTTPS。但这样有一个漏洞，就是中间人可能在第一次访问站点的时候就劫持。
    解决方法是引入HSTS机制，用户浏览器在访问站点的时候强制使用HTTPS。
    详情见https://www.sohu.com/a/136637876_487516
  - 如果是https，请求头的schema字段会写https

- HTTPS的请求头会被加密吗？

  - https报文在被包装成TCP报文的时候完成加密的过程，无论是https的header域也好,body域也罢都是会被加密的，在与服务器端通信的时候是用的密文。可以用wireshark或者tcpdump之类的抓包工具看。
  - HTTPS里的SSL/TLS是完全模拟了一个通信通道，在其上应用协议的全部数据都会加密。可以理解为平时TCP传输的数据都被加密了。

- TCP的流量控制和拥塞控制

  > 流量控制知识点：https://blog.csdn.net/chanxingchuo7293/article/details/100969295

- 浏览器中输入网址到获得页面的全过程

### 2、数据库

- 事务的四大特性
  - ACID
- 四种隔离级别
  - 读可提交，读不可提交，可重复读，序列化。
- 什么是幻读
- InnoDB 怎么防止幻读
- B+树原理，为什么使用B+而不是二叉平衡树

### 3、操作系统

- 用户态如何切换到内核态
  - 发生系统调用，产生异常，外设产生中断时。

- 进程间通信的方式，哪种最快
- 信号量怎么实现对共享资源的访问

### 4、语言

- 什么是Python生成器，迭代器
- 什么是装饰器；
- 元组和list的区别；
  - 列表是动态的，其大小可以改变。元组是不可变的，一旦创建就不能修改。
  - 在C的实现是相似的，二者速度差不多。对于小对象来说，tuple会有一个对象池，所以小的、重复的使用tuple还有益处的。
- Python中的dict底层怎么实现的
  - hashtable，用开放定址法。因为追求效率，牺牲内存。以空间换时间。
- list的底层怎么实现的；
  - 不是链表，而是采用分离式技术实现的可变长数组。（其实就是变量存的是地址的vector，美其名曰分离式技术而已。正因为这种元素外置的方式，所以元素可以是任意类型）
- 双等于和is有什么区别
  - 比如对于两个list，==比较的是值是否相同（即调用`__eq__()`方法），is是比较两个对象的地址（即二者是否是同一个实例对象）
- Python多线程用了几个CPU
  - 一个

### 5、聊天

和其他同学相比，你觉得自己有什么优势
自己的不足有哪些
GitHub和博客上分享过哪些东西

你用Django的时候，觉得它有哪些好的特性

